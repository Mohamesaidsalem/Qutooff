// ============================================
// COMPLETE TIMEZONES LIST
// ============================================

export const COMPLETE_TIMEZONES = [
  // Africa
  'Africa/Abidjan',
  'Africa/Accra',
  'Africa/Addis_Ababa',
  'Africa/Algiers',
  'Africa/Cairo',
  'Africa/Casablanca',
  'Africa/Dakar',
  'Africa/Dar_es_Salaam',
  'Africa/Harare',
  'Africa/Johannesburg',
  'Africa/Kampala',
  'Africa/Khartoum',
  'Africa/Kinshasa',
  'Africa/Lagos',
  'Africa/Luanda',
  'Africa/Maputo',
  'Africa/Nairobi',
  'Africa/Tunis',
  'Africa/Windhoek',
  
  // Americas - North America
  'America/Anchorage',
  'America/Chicago',
  'America/Denver',
  'America/Los_Angeles',
  'America/New_York',
  'America/Phoenix',
  'America/Toronto',
  'America/Vancouver',
  'America/Winnipeg',
  
  // Americas - Central America
  'America/Costa_Rica',
  'America/El_Salvador',
  'America/Guatemala',
  'America/Havana',
  'America/Jamaica',
  'America/Managua',
  'America/Mexico_City',
  'America/Panama',
  'America/Tegucigalpa',
  
  // Americas - South America
  'America/Asuncion',
  'America/Bogota',
  'America/Buenos_Aires',
  'America/Caracas',
  'America/La_Paz',
  'America/Lima',
  'America/Montevideo',
  'America/Santiago',
  'America/Sao_Paulo',
  
  // Asia - Middle East
  'Asia/Amman',
  'Asia/Baghdad',
  'Asia/Bahrain',
  'Asia/Beirut',
  'Asia/Damascus',
  'Asia/Dubai',
  'Asia/Gaza',
  'Asia/Jerusalem',
  'Asia/Kuwait',
  'Asia/Muscat',
  'Asia/Nicosia',
  'Asia/Qatar',
  'Asia/Riyadh',
  'Asia/Tehran',
  
  // Asia - Central Asia
  'Asia/Almaty',
  'Asia/Ashgabat',
  'Asia/Baku',
  'Asia/Bishkek',
  'Asia/Dushanbe',
  'Asia/Kabul',
  'Asia/Karachi',
  'Asia/Tashkent',
  'Asia/Tbilisi',
  'Asia/Yerevan',
  
  // Asia - South Asia
  'Asia/Colombo',
  'Asia/Dhaka',
  'Asia/Kathmandu',
  'Asia/Kolkata',
  'Asia/Thimphu',
  
  // Asia - Southeast Asia
  'Asia/Bangkok',
  'Asia/Ho_Chi_Minh',
  'Asia/Jakarta',
  'Asia/Kuala_Lumpur',
  'Asia/Manila',
  'Asia/Phnom_Penh',
  'Asia/Singapore',
  'Asia/Vientiane',
  'Asia/Yangon',
  
  // Asia - East Asia
  'Asia/Chongqing',
  'Asia/Hong_Kong',
  'Asia/Macau',
  'Asia/Pyongyang',
  'Asia/Seoul',
  'Asia/Shanghai',
  'Asia/Taipei',
  'Asia/Tokyo',
  'Asia/Ulaanbaatar',
  
  // Australia & Pacific
  'Australia/Adelaide',
  'Australia/Brisbane',
  'Australia/Canberra',
  'Australia/Darwin',
  'Australia/Hobart',
  'Australia/Melbourne',
  'Australia/Perth',
  'Australia/Sydney',
  'Pacific/Auckland',
  'Pacific/Fiji',
  'Pacific/Guam',
  'Pacific/Honolulu',
  'Pacific/Pago_Pago',
  'Pacific/Port_Moresby',
  'Pacific/Samoa',
  'Pacific/Tahiti',
  'Pacific/Tongatapu',
  
  // Europe - Western Europe
  'Europe/Dublin',
  'Europe/Lisbon',
  'Europe/London',
  
  // Europe - Central Europe
  'Europe/Amsterdam',
  'Europe/Andorra',
  'Europe/Berlin',
  'Europe/Brussels',
  'Europe/Copenhagen',
  'Europe/Madrid',
  'Europe/Monaco',
  'Europe/Oslo',
  'Europe/Paris',
  'Europe/Prague',
  'Europe/Rome',
  'Europe/Stockholm',
  'Europe/Vienna',
  'Europe/Warsaw',
  'Europe/Zurich',
  
  // Europe - Eastern Europe
  'Europe/Athens',
  'Europe/Bucharest',
  'Europe/Budapest',
  'Europe/Helsinki',
  'Europe/Istanbul',
  'Europe/Kiev',
  'Europe/Minsk',
  'Europe/Moscow',
  'Europe/Riga',
  'Europe/Sofia',
  'Europe/Tallinn',
  'Europe/Vilnius',
  
  // Atlantic
  'Atlantic/Azores',
  'Atlantic/Bermuda',
  'Atlantic/Cape_Verde',
  'Atlantic/Reykjavik',
];

// ============================================
// COUNTRIES LIST
// ============================================

export const COUNTRIES = [
  // Arab Countries
  { code: 'SAU', name: 'Saudi Arabia', flag: 'ðŸ‡¸ðŸ‡¦' },
  { code: 'UAE', name: 'United Arab Emirates', flag: 'ðŸ‡¦ðŸ‡ª' },
  { code: 'EGY', name: 'Egypt', flag: 'ðŸ‡ªðŸ‡¬' },
  { code: 'KWT', name: 'Kuwait', flag: 'ðŸ‡°ðŸ‡¼' },
  { code: 'QAT', name: 'Qatar', flag: 'ðŸ‡¶ðŸ‡¦' },
  { code: 'BHR', name: 'Bahrain', flag: 'ðŸ‡§ðŸ‡­' },
  { code: 'OMN', name: 'Oman', flag: 'ðŸ‡´ðŸ‡²' },
  { code: 'JOR', name: 'Jordan', flag: 'ðŸ‡¯ðŸ‡´' },
  { code: 'LBN', name: 'Lebanon', flag: 'ðŸ‡±ðŸ‡§' },
  { code: 'IRQ', name: 'Iraq', flag: 'ðŸ‡®ðŸ‡¶' },
  { code: 'SYR', name: 'Syria', flag: 'ðŸ‡¸ðŸ‡¾' },
  { code: 'MAR', name: 'Morocco', flag: 'ðŸ‡²ðŸ‡¦' },
  { code: 'TUN', name: 'Tunisia', flag: 'ðŸ‡¹ðŸ‡³' },
  { code: 'DZA', name: 'Algeria', flag: 'ðŸ‡©ðŸ‡¿' },
  { code: 'LBY', name: 'Libya', flag: 'ðŸ‡±ðŸ‡¾' },
  { code: 'SDN', name: 'Sudan', flag: 'ðŸ‡¸ðŸ‡©' },
  { code: 'YEM', name: 'Yemen', flag: 'ðŸ‡¾ðŸ‡ª' },
  
  // English Speaking Countries
  { code: 'USA', name: 'United States', flag: 'ðŸ‡ºðŸ‡¸' },
  { code: 'GBR', name: 'United Kingdom', flag: 'ðŸ‡¬ðŸ‡§' },
  { code: 'CAN', name: 'Canada', flag: 'ðŸ‡¨ðŸ‡¦' },
  { code: 'AUS', name: 'Australia', flag: 'ðŸ‡¦ðŸ‡º' },
  { code: 'NZL', name: 'New Zealand', flag: 'ðŸ‡³ðŸ‡¿' },
  { code: 'IRL', name: 'Ireland', flag: 'ðŸ‡®ðŸ‡ª' },
  
  // Asian Countries
  { code: 'PAK', name: 'Pakistan', flag: 'ðŸ‡µðŸ‡°' },
  { code: 'IND', name: 'India', flag: 'ðŸ‡®ðŸ‡³' },
  { code: 'BGD', name: 'Bangladesh', flag: 'ðŸ‡§ðŸ‡©' },
  { code: 'IDN', name: 'Indonesia', flag: 'ðŸ‡®ðŸ‡©' },
  { code: 'MYS', name: 'Malaysia', flag: 'ðŸ‡²ðŸ‡¾' },
  { code: 'SGP', name: 'Singapore', flag: 'ðŸ‡¸ðŸ‡¬' },
  { code: 'THA', name: 'Thailand', flag: 'ðŸ‡¹ðŸ‡­' },
  { code: 'PHL', name: 'Philippines', flag: 'ðŸ‡µðŸ‡­' },
  { code: 'CHN', name: 'China', flag: 'ðŸ‡¨ðŸ‡³' },
  { code: 'JPN', name: 'Japan', flag: 'ðŸ‡¯ðŸ‡µ' },
  { code: 'KOR', name: 'South Korea', flag: 'ðŸ‡°ðŸ‡·' },
  { code: 'TUR', name: 'Turkey', flag: 'ðŸ‡¹ðŸ‡·' },
  
  // European Countries
  { code: 'FRA', name: 'France', flag: 'ðŸ‡«ðŸ‡·' },
  { code: 'DEU', name: 'Germany', flag: 'ðŸ‡©ðŸ‡ª' },
  { code: 'ITA', name: 'Italy', flag: 'ðŸ‡®ðŸ‡¹' },
  { code: 'ESP', name: 'Spain', flag: 'ðŸ‡ªðŸ‡¸' },
  { code: 'NLD', name: 'Netherlands', flag: 'ðŸ‡³ðŸ‡±' },
  { code: 'BEL', name: 'Belgium', flag: 'ðŸ‡§ðŸ‡ª' },
  { code: 'SWE', name: 'Sweden', flag: 'ðŸ‡¸ðŸ‡ª' },
  { code: 'NOR', name: 'Norway', flag: 'ðŸ‡³ðŸ‡´' },
  { code: 'DNK', name: 'Denmark', flag: 'ðŸ‡©ðŸ‡°' },
  { code: 'FIN', name: 'Finland', flag: 'ðŸ‡«ðŸ‡®' },
  { code: 'POL', name: 'Poland', flag: 'ðŸ‡µðŸ‡±' },
  { code: 'RUS', name: 'Russia', flag: 'ðŸ‡·ðŸ‡º' },
  
  // African Countries
  { code: 'ZAF', name: 'South Africa', flag: 'ðŸ‡¿ðŸ‡¦' },
  { code: 'NGA', name: 'Nigeria', flag: 'ðŸ‡³ðŸ‡¬' },
  { code: 'KEN', name: 'Kenya', flag: 'ðŸ‡°ðŸ‡ª' },
  { code: 'ETH', name: 'Ethiopia', flag: 'ðŸ‡ªðŸ‡¹' },
  
  // South American Countries
  { code: 'BRA', name: 'Brazil', flag: 'ðŸ‡§ðŸ‡·' },
  { code: 'ARG', name: 'Argentina', flag: 'ðŸ‡¦ðŸ‡·' },
  { code: 'CHL', name: 'Chile', flag: 'ðŸ‡¨ðŸ‡±' },
  { code: 'COL', name: 'Colombia', flag: 'ðŸ‡¨ðŸ‡´' },
  { code: 'PER', name: 'Peru', flag: 'ðŸ‡µðŸ‡ª' },
  { code: 'VEN', name: 'Venezuela', flag: 'ðŸ‡»ðŸ‡ª' },
];

// ============================================
// LANGUAGES LIST
// ============================================

export const LANGUAGES = [
  'Arabic',
  'English',
  'Urdu',
  'French',
  'Turkish',
  'Bengali',
  'Malay',
  'Indonesian',
  'Spanish',
  'German',
  'Russian',
  'Chinese',
  'Japanese',
  'Korean',
  'Hindi',
  'Persian',
  'Pashto',
  'Swahili',
  'Portuguese',
  'Italian',
];

// ============================================
// STUDENT LEVELS
// ============================================

export const STUDENT_LEVELS = [
  'Beginner',
  'Elementary',
  'Intermediate',
  'Advanced',
  'Expert',
];

// ============================================
// PAYMENT MODES
// ============================================

export const PAYMENT_MODES = [
  'PayPal',
  'Bank Transfer',
  'Credit Card',
  'Debit Card',
  'Cash',
  'Stripe',
  'Wire Transfer',
  'Western Union',
  'MoneyGram',
];

// ============================================
// INVOICE TYPES
// ============================================

export const INVOICE_TYPES = [
  'Monthly',
  'Quarterly',
  'Semi-Annual',
  'Yearly',
  'Non-Recurring',
  'Per Class',
];

// ============================================
// INVOICE CYCLES
// ============================================

export const INVOICE_CYCLES = [
  '1st of every month',
  '5th of every month',
  '10th of every month',
  '15th of every month',
  '20th of every month',
  '25th of every month',
  'Last day of month',
  'Custom',
];

// ============================================
// CURRENCIES
// ============================================

export const CURRENCIES = [
  { code: 'USD', symbol: '$', name: 'US Dollar' },
  { code: 'EUR', symbol: 'â‚¬', name: 'Euro' },
  { code: 'GBP', symbol: 'Â£', name: 'British Pound' },
  { code: 'AED', symbol: 'Ø¯.Ø¥', name: 'UAE Dirham' },
  { code: 'SAR', symbol: 'Ø±.Ø³', name: 'Saudi Riyal' },
  { code: 'EGP', symbol: 'EÂ£', name: 'Egyptian Pound' },
  { code: 'PKR', symbol: 'â‚¨', name: 'Pakistani Rupee' },
  { code: 'INR', symbol: 'â‚¹', name: 'Indian Rupee' },
  { code: 'AUD', symbol: 'A$', name: 'Australian Dollar' },
  { code: 'CAD', symbol: 'C$', name: 'Canadian Dollar' },
  { code: 'MYR', symbol: 'RM', name: 'Malaysian Ringgit' },
  { code: 'SGD', symbol: 'S$', name: 'Singapore Dollar' },
  { code: 'TRY', symbol: 'â‚º', name: 'Turkish Lira' },
  { code: 'BRL', symbol: 'R$', name: 'Brazilian Real' },
];

// ============================================
// NOTIFICATION SETTINGS
// ============================================

export const NOTIFICATION_SETTINGS = [
  'Email',
  'SMS',
  'WhatsApp',
  'Phone Call',
  'In-App Only',
  'All Methods',
  'None',
];

// ============================================
// STUDENT STATUS
// ============================================

export const STUDENT_STATUS = [
  { value: 'active', label: 'âœ… Active', color: 'green' },
  { value: 'suspended', label: 'â›” Suspended', color: 'yellow' },
  { value: 'on-hold', label: 'ðŸ– On Hold', color: 'gray' },
  { value: 'inactive', label: 'âŒ Inactive', color: 'red' },
  { value: 'graduated', label: 'ðŸŽ“ Graduated', color: 'purple' },
  { value: 'trial', label: 'ðŸ” Trial', color: 'blue' },
];

// ============================================
// TIMEZONE CONVERSION FUNCTIONS
// ============================================

export const convertToUTC = (localDate: string, localTime: string, timezone: string = DEFAULT_TIMEZONE): { 
  utcDate: string; 
  utcTime: string; 
  utcDateTime: string;
  localDateTime: Date;
  utcDateObj: Date;
} => {
  try {
    // Create a date string in the format: YYYY-MM-DDTHH:mm
    const localDateTimeStr = `${localDate}T${localTime}`;
    
    // Create a date object (this will be in user's local timezone)
    const localDateTime = new Date(localDateTimeStr);
    
    // Get UTC date and time
    const utcDateObj = new Date(localDateTime.toLocaleString('en-US', { timeZone: 'UTC' }));
    
    // Format UTC date and time
    const utcYear = utcDateObj.getFullYear();
    const utcMonth = String(utcDateObj.getMonth() + 1).padStart(2, '0');
    const utcDay = String(utcDateObj.getDate()).padStart(2, '0');
    const utcHours = String(utcDateObj.getHours()).padStart(2, '0');
    const utcMinutes = String(utcDateObj.getMinutes()).padStart(2, '0');
    
    const utcDate = `${utcYear}-${utcMonth}-${utcDay}`;
    const utcTime = `${utcHours}:${utcMinutes}`;
    const utcDateTime = `${utcDate}T${utcTime}`;
    
    return {
      utcDate,
      utcTime,
      utcDateTime,
      localDateTime,
      utcDateObj
    };
  } catch (error) {
    console.error('Error converting to UTC:', error);
    const now = new Date();
    const isoString = now.toISOString();
    return {
      utcDate: isoString.slice(0, 10),
      utcTime: isoString.slice(11, 16),
      utcDateTime: isoString.slice(0, 16),
      localDateTime: now,
      utcDateObj: now
    };
  }
};

export const convertFromUTC = (utcDate: string, utcTime: string, timezone: string = DEFAULT_TIMEZONE): {
  localDate: string;
  localTime: string;
  localDateTime: Date;
  formattedDate: string;
  formattedTime: string;
} => {
  try {
    // Create UTC date string
    const utcDateTimeStr = `${utcDate}T${utcTime}:00.000Z`;
    const utcDateObj = new Date(utcDateTimeStr);
    
    // Convert to local timezone
    const localDateTime = new Date(utcDateObj.toLocaleString('en-US', { timeZone: timezone }));
    
    // Format local date and time
    const localYear = localDateTime.getFullYear();
    const localMonth = String(localDateTime.getMonth() + 1).padStart(2, '0');
    const localDay = String(localDateTime.getDate()).padStart(2, '0');
    const localHours = String(localDateTime.getHours()).padStart(2, '0');
    const localMinutes = String(localDateTime.getMinutes()).padStart(2, '0');
    
    const localDate = `${localYear}-${localMonth}-${localDay}`;
    const localTime = `${localHours}:${localMinutes}`;
    
    // Formatted versions
    const formattedDate = localDateTime.toLocaleDateString('en-US', { 
      timeZone: timezone,
      year: 'numeric',
      month: 'short',
      day: 'numeric'
    });
    
    const formattedTime = localDateTime.toLocaleTimeString('en-US', {
      timeZone: timezone,
      hour: '2-digit',
      minute: '2-digit',
      hour12: true
    });
    
    return {
      localDate,
      localTime,
      localDateTime,
      formattedDate,
      formattedTime
    };
  } catch (error) {
    console.error('Error converting from UTC:', error);
    const now = new Date();
    return {
      localDate: now.toISOString().slice(0, 10),
      localTime: now.toISOString().slice(11, 16),
      localDateTime: now,
      formattedDate: now.toLocaleDateString(),
      formattedTime: now.toLocaleTimeString()
    };
  }
};

export const formatTimeForTimezone = (date: Date, timezone: string): string => {
  try {
    return date.toLocaleString('en-US', { 
      timeZone: timezone,
      hour: '2-digit',
      minute: '2-digit',
      hour12: true
    });
  } catch (error) {
    console.error('Error formatting time:', error);
    return date.toLocaleTimeString();
  }
};

export const formatDateForTimezone = (date: Date, timezone: string): string => {
  try {
    return date.toLocaleString('en-US', { 
      timeZone: timezone,
      year: 'numeric',
      month: '2-digit',
      day: '2-digit'
    });
  } catch (error) {
    console.error('Error formatting date:', error);
    return date.toLocaleDateString();
  }
};

export const formatDateTimeForTimezone = (date: Date, timezone: string): string => {
  try {
    return date.toLocaleString('en-US', { 
      timeZone: timezone,
      year: 'numeric',
      month: '2-digit',
      day: '2-digit',
      hour: '2-digit',
      minute: '2-digit',
      hour12: true
    });
  } catch (error) {
    console.error('Error formatting datetime:', error);
    return date.toLocaleString();
  }
};

// ============================================
// HELPER FUNCTIONS
// ============================================

export const getTimezoneOffset = (timezone: string): string => {
  try {
    const now = new Date();
    const tzString = now.toLocaleString('en-US', { timeZone: timezone });
    const tzDate = new Date(tzString);
    const offset = (tzDate.getTime() - now.getTime()) / 3600000;
    const sign = offset >= 0 ? '+' : '-';
    const hours = Math.floor(Math.abs(offset));
    const minutes = Math.round((Math.abs(offset) - hours) * 60);
    return `UTC${sign}${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}`;
  } catch {
    return 'UTC+00:00';
  }
};

export const formatTimezoneDisplay = (timezone: string): string => {
  const offset = getTimezoneOffset(timezone);
  const city = timezone.split('/')[1]?.replace(/_/g, ' ') || timezone;
  return `${city} (${offset})`;
};

export const getCountryByCode = (code: string) => {
  return COUNTRIES.find(c => c.code === code);
};

export const getCurrencyByCode = (code: string) => {
  return CURRENCIES.find(c => c.code === code);
};

export const getStudentStatusColor = (status: string): string => {
  const statusObj = STUDENT_STATUS.find(s => s.value === status);
  return statusObj?.color || 'gray';
};

export const formatPhoneNumber = (phone: string, countryCode?: string): string => {
  // Basic phone formatting
  const cleaned = phone.replace(/\D/g, '');
  if (cleaned.length === 10) {
    return `(${cleaned.slice(0, 3)}) ${cleaned.slice(3, 6)}-${cleaned.slice(6)}`;
  }
  return phone;
};

export const validateEmail = (email: string): boolean => {
  const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
  return emailRegex.test(email);
};

export const calculateAge = (birthDate: string | Date): number => {
  const birth = new Date(birthDate);
  const today = new Date();
  let age = today.getFullYear() - birth.getFullYear();
  const monthDiff = today.getMonth() - birth.getMonth();
  if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birth.getDate())) {
    age--;
  }
  return age;
};

export const getCurrentTimeInTimezone = (timezone: string): Date => {
  try {
    const now = new Date();
    const timeString = now.toLocaleString('en-US', { timeZone: timezone });
    return new Date(timeString);
  } catch (error) {
    console.error('Error getting current time:', error);
    return new Date();
  }
};

export const getUserTimezone = (): string => {
  try {
    return Intl.DateTimeFormat().resolvedOptions().timeZone || DEFAULT_TIMEZONE;
  } catch (error) {
    console.error('Error getting user timezone:', error);
    return DEFAULT_TIMEZONE;
  }
};

export const getTimezoneDisplayName = (timezone: string): string => {
  try {
    const offset = getTimezoneOffset(timezone);
    const city = timezone.split('/').pop()?.replace(/_/g, ' ') || timezone;
    return `${city} (${offset})`;
  } catch (error) {
    console.error('Error getting timezone display name:', error);
    return timezone;
  }
};

export const getTimezoneAbbreviation = (timezone: string): string => {
  try {
    const date = new Date();
    const parts = date.toLocaleString('en-US', { 
      timeZone: timezone, 
      timeZoneName: 'short' 
    }).split(' ');
    return parts[parts.length - 1] || 'UTC';
  } catch (error) {
    console.error('Error getting timezone abbreviation:', error);
    return 'UTC';
  }
};

export const getCurrentLocalDateTime = (timezone: string = DEFAULT_TIMEZONE): { date: string; time: string; dateTime: string } => {
  try {
    const now = new Date();
    const year = now.getFullYear();
    const month = String(now.getMonth() + 1).padStart(2, '0');
    const day = String(now.getDate()).padStart(2, '0');
    const hours = String(now.getHours()).padStart(2, '0');
    const minutes = String(now.getMinutes()).padStart(2, '0');
    
    const date = `${year}-${month}-${day}`;
    const time = `${hours}:${minutes}`;
    const dateTime = `${date}T${time}`;
    
    return { date, time, dateTime };
  } catch (error) {
    console.error('Error getting current local datetime:', error);
    const now = new Date();
    const isoString = now.toISOString();
    return {
      date: isoString.slice(0, 10),
      time: isoString.slice(11, 16),
      dateTime: isoString.slice(0, 16)
    };
  }
};

export const formatDateTimeLocal = (date: Date | string): string => {
  try {
    const d = typeof date === 'string' ? new Date(date) : date;
    const year = d.getFullYear();
    const month = String(d.getMonth() + 1).padStart(2, '0');
    const day = String(d.getDate()).padStart(2, '0');
    const hours = String(d.getHours()).padStart(2, '0');
    const minutes = String(d.getMinutes()).padStart(2, '0');
    
    return `${year}-${month}-${day}T${hours}:${minutes}`;
  } catch (error) {
    console.error('Error formatting datetime local:', error);
    return new Date().toISOString().slice(0, 16);
  }
};

export const parseDateTimeLocal = (dateTimeLocal: string): Date => {
  try {
    return new Date(dateTimeLocal);
  } catch (error) {
    console.error('Error parsing datetime local:', error);
    return new Date();
  }
};

export const addMinutes = (date: Date, minutes: number): Date => {
  return new Date(date.getTime() + minutes * 60000);
};

export const addHours = (date: Date, hours: number): Date => {
  return new Date(date.getTime() + hours * 3600000);
};

export const addDays = (date: Date, days: number): Date => {
  const result = new Date(date);
  result.setDate(result.getDate() + days);
  return result;
};

export const isSameDay = (date1: Date, date2: Date): boolean => {
  return date1.getFullYear() === date2.getFullYear() &&
         date1.getMonth() === date2.getMonth() &&
         date1.getDate() === date2.getDate();
};

export const isToday = (date: Date): boolean => {
  return isSameDay(date, new Date());
};

export const isFutureDate = (date: Date): boolean => {
  return date.getTime() > new Date().getTime();
};

export const isPastDate = (date: Date): boolean => {
  return date.getTime() < new Date().getTime();
};

export const getDayName = (date: Date): string => {
  const days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
  return days[date.getDay()];
};

export const getMonthName = (date: Date): string => {
  const months = ['January', 'February', 'March', 'April', 'May', 'June', 
                  'July', 'August', 'September', 'October', 'November', 'December'];
  return months[date.getMonth()];
};

export const formatDate = (date: Date | string, format: string = 'YYYY-MM-DD'): string => {
  try {
    const d = typeof date === 'string' ? new Date(date) : date;
    const year = d.getFullYear();
    const month = String(d.getMonth() + 1).padStart(2, '0');
    const day = String(d.getDate()).padStart(2, '0');
    
    switch (format) {
      case 'YYYY-MM-DD':
        return `${year}-${month}-${day}`;
      case 'DD/MM/YYYY':
        return `${day}/${month}/${year}`;
      case 'MM/DD/YYYY':
        return `${month}/${day}/${year}`;
      case 'DD-MM-YYYY':
        return `${day}-${month}-${year}`;
      default:
        return `${year}-${month}-${day}`;
    }
  } catch (error) {
    console.error('Error formatting date:', error);
    return '';
  }
};

export const formatTime = (date: Date | string, format: '12h' | '24h' = '12h'): string => {
  try {
    const d = typeof date === 'string' ? new Date(date) : date;
    const hours24 = d.getHours();
    const minutes = String(d.getMinutes()).padStart(2, '0');
    
    if (format === '24h') {
      return `${String(hours24).padStart(2, '0')}:${minutes}`;
    } else {
      const hours12 = hours24 % 12 || 12;
      const ampm = hours24 >= 12 ? 'PM' : 'AM';
      return `${hours12}:${minutes} ${ampm}`;
    }
  } catch (error) {
    console.error('Error formatting time:', error);
    return '';
  }
};

export const getWeekNumber = (date: Date): number => {
  const d = new Date(Date.UTC(date.getFullYear(), date.getMonth(), date.getDate()));
  const dayNum = d.getUTCDay() || 7;
  d.setUTCDate(d.getUTCDate() + 4 - dayNum);
  const yearStart = new Date(Date.UTC(d.getUTCFullYear(), 0, 1));
  return Math.ceil((((d.getTime() - yearStart.getTime()) / 86400000) + 1) / 7);
};

export const getDaysBetween = (date1: Date, date2: Date): number => {
  const oneDay = 24 * 60 * 60 * 1000;
  return Math.round(Math.abs((date1.getTime() - date2.getTime()) / oneDay));
};

export const getHoursBetween = (date1: Date, date2: Date): number => {
  const oneHour = 60 * 60 * 1000;
  return Math.round(Math.abs((date1.getTime() - date2.getTime()) / oneHour));
};

export const getMinutesBetween = (date1: Date, date2: Date): number => {
  const oneMinute = 60 * 1000;
  return Math.round(Math.abs((date1.getTime() - date2.getTime()) / oneMinute));
};

export const isTimezoneSame = (tz1: string, tz2: string): boolean => {
  try {
    const now = new Date();
    const offset1 = getTimezoneOffset(tz1);
    const offset2 = getTimezoneOffset(tz2);
    return offset1 === offset2;
  } catch {
    return false;
  }
};

// ============================================
// DEFAULT VALUES
// ============================================

export const DEFAULT_TIMEZONE = 'Asia/Riyadh';
export const DEFAULT_CURRENCY = 'USD';
export const DEFAULT_LANGUAGE = 'English';
export const DEFAULT_LEVEL = 'Beginner';
export const DEFAULT_STATUS = 'active';
export const DEFAULT_PAYMENT_MODE = 'PayPal';
export const DEFAULT_INVOICE_TYPE = 'Monthly';
export const DEFAULT_INVOICE_CYCLE = '1st of every month';